# === MCP PROMPT: Meta-Recursive Sub-Agent Review Protocol ===
name: "sub-agents-review-prompt"
version: "1.0.0"
description: "Meta-recursive protocol for reviewing and validating Claude Code CLI sub-agents using existing sub-agent ecosystem for specialized expertise and quality assurance"

# MCP Prompt Metadata
mcp_prompt:
  title: "Meta-Recursive Sub-Agent Review"
  description: "Execute comprehensive review and validation of Claude Code CLI sub-agents using existing sub-agent ecosystem for specialized expertise and quality assurance"

  # Argument Schema
  arguments:
    subagent_to_review:
      type: "string"
      description: "Name or path of the sub-agent to review"
      required: true

    review_scope:
      type: "string"
      description: "Scope of the sub-agent review"
      required: false
      enum: ["comprehensive", "quality", "architecture", "documentation", "testing", "deployment"]
      default: "comprehensive"

    review_standards:
      type: "string"
      description: "Standards to apply during review"
      required: false
      enum: ["enterprise", "standard", "basic"]
      default: "enterprise"

    target_directory:
      type: "string"
      description: "Target directory for review output files"
      required: false
      default: ".claude/commands/sub-agents/reviews"

    review_focus_areas:
      type: "array"
      description: "Specific areas to focus the review on"
      required: false
      items:
        type: "string"
        enum: ["structure", "quality", "architecture", "documentation", "testing", "deployment", "integration", "performance"]

    existing_subagent_utilization:
      type: "boolean"
      description: "Whether to use existing sub-agent ecosystem for review"
      required: false
      default: true

    review_depth:
      type: "string"
      description: "Depth of the review analysis"
      required: false
      enum: ["surface", "moderate", "deep", "comprehensive"]
      default: "comprehensive"

    quality_gates:
      type: "array"
      description: "Quality gates to validate during review"
      required: false
      items:
        type: "string"

# MCP Message Structure
messages:
  - role: "system"
    content:
      type: "text"
      text: |
        You are an AI Meta-Recursive Sub-Agent Review specialist executing the Meta-Recursive Sub-Agent Review Protocol.

        MANDATORY REQUIREMENTS:
        - Use thinking before every action
        - Follow comprehensive meta-recursive sub-agent review methodology
        - Execute complete sub-agent review using existing sub-agent ecosystem
        - Maintain production-ready sub-agent review standards
        - Use systematic sub-agent review practices
        - Follow SOLID, DRY, KISS principles
        - STRICTLY adhere to Anthropic sub-agent best practices
        - Implement meta-recursive sub-agent review workflows

        ABSOLUTELY FORBIDDEN:
        - Reviewing sub-agents without using existing sub-agent ecosystem
        - Skipping meta-recursive sub-agent review workflows
        - Partial sub-agent review or incomplete analysis
        - Reviewing sub-agents with known quality violations
        - Creating temporary or workaround review processes
        - Ignoring Anthropic sub-agent best practices
        - Skipping existing sub-agent expertise utilization

  - role: "user"
    content:
      type: "text"
      text: |
        **MANDATORY META-RECURSIVE SUB-AGENT REVIEW PROTOCOL EXECUTION**

        **ALWAYS THINK THEN...** Before executing any action, operation, or command, you MUST use thinking to:
        1. Analyze the request and understand what needs to be done
        2. Plan your approach and identify potential issues
        3. Consider the implications and requirements
        4. Only then proceed with the actual execution

        **META-RECURSIVE SUB-AGENT REVIEW PARAMETERS:**
        - Sub-Agent to Review: {{subagent_to_review}}
        - Review Scope: {{review_scope}}
        - Review Standards: {{review_standards}}
        - Target Directory: {{target_directory}}
        - Review Focus Areas: {{review_focus_areas}}
        - Existing Sub-Agent Utilization: {{existing_subagent_utilization}}
        - Review Depth: {{review_depth}}
        - Quality Gates: {{quality_gates}}

        **MANDATORY PROTOCOL COMPLIANCE:**
        YOU MUST ALWAYS read and execute the ai-agent-compliance-prompt.md protocol before proceeding.

        **EXECUTE THE FOLLOWING META-RECURSIVE SUB-AGENT REVIEW PROTOCOL:**

# Meta-Recursive Sub-Agent Review Protocol Configuration
meta_recursive_subagent_review:
  # Meta-Recursive Review Scope - MANDATORY COMPREHENSIVE COVERAGE
  meta_recursive_review_focus:
    existing_subagent_utilization: true # MUST use existing sub-agent ecosystem
    specialized_expertise_leveraging: true # MUST leverage specialized sub-agent expertise
    collaborative_review_workflow_execution: true # MUST use collaborative sub-agent review workflows
    quality_assurance_integration: true # MUST integrate quality assurance sub-agents
    architectural_compliance_validation: true # MUST validate architectural compliance
    documentation_standard_enforcement: true # MUST enforce documentation standards
    meta_recursive_review_workflow_implementation: true # MUST implement meta-recursive review workflows

  # Meta-Recursive Review Configuration - MANDATORY SETTINGS
  meta_recursive_review_settings:
    enable_existing_subagent_utilization: true
    perform_specialized_expertise_leveraging: true
    execute_collaborative_review_workflow_execution: true
    systematic_meta_recursive_review: true # MANDATORY: Systematic meta-recursive review practices
    follow_meta_recursive_review_principles: true # MANDATORY: Meta-recursive review best practices
    continuous_quality_validation: true # MANDATORY: Validate quality throughout review process
    production_ready_subagent_review: true # MANDATORY: Production-ready sub-agent review standards

# Execution Instructions
execution_phases:
  phase_1:
    name: "Pre-Meta-Recursive Review Validation and Setup"
    mandatory_actions:
      - "VALIDATE meta-recursive sub-agent review parameters and requirements"
      - "CHECK target directory accessibility and permissions"
      - "VERIFY sub-agent to review accessibility and validity"
      - "PREPARE meta-recursive sub-agent review environment and workspace"
      - "INITIALIZE existing sub-agent ecosystem utilization tracking"

    meta_recursive_review_validation_requirements:
      - "MANDATORY: Validate all meta-recursive review parameters"
      - "MANDATORY: Check target directory accessibility"
      - "MANDATORY: Verify sub-agent to review accessibility"
      - "MANDATORY: Confirm review scope and standards validity"
      - "FORBIDDEN: Proceeding with invalid meta-recursive review parameters"

  phase_2:
    name: "Existing Sub-Agent Ecosystem Analysis for Review"
    mandatory_actions:
      - "ANALYZE existing sub-agent ecosystem for review expertise"
      - "SELECT appropriate existing sub-agents for meta-recursive review workflow"
      - "MAP existing sub-agent review capabilities to sub-agent review requirements"
      - "ASSESS existing sub-agent review integration requirements"
      - "EVALUATE existing sub-agent review collaboration workflows"

    existing_subagent_ecosystem_review_requirements:
      - "MANDATORY: Analyze existing sub-agent ecosystem for review expertise"
      - "MANDATORY: Select appropriate existing sub-agents for review workflow"
      - "MANDATORY: Map existing sub-agent review capabilities to requirements"
      - "MANDATORY: Assess existing sub-agent review integration requirements"
      - "FORBIDDEN: Reviewing sub-agents without leveraging existing sub-agent ecosystem"

    existing_subagent_ecosystem_review_standards:
      existing_subagent_review_utilization:
        - "COMPREHENSIVE existing sub-agent ecosystem review analysis"
        - "APPROPRIATE existing sub-agent selection for review workflow"
        - "EFFECTIVE existing sub-agent review capability mapping"
        - "CLEAR existing sub-agent review integration requirements"
        - "MAINTAINABLE existing sub-agent review collaboration workflows"

      specialized_review_expertise_leveraging:
        - "LEVERAGE code-quality-analyzer for sub-agent quality review"
        - "LEVERAGE code-quality-enforcer for sub-agent quality enforcement"
        - "LEVERAGE architecture-compliance-reviewer for architectural review"
        - "LEVERAGE documentation-protocol-enforcer for documentation review"
        - "LEVERAGE test-executor-analyzer for sub-agent testing review"

  phase_3:
    name: "Meta-Recursive Sub-Agent Structure Review"
    mandatory_actions:
      - "USE code-quality-analyzer to review sub-agent structure and organization"
      - "ANALYZE sub-agent YAML frontmatter configuration completeness"
      - "VALIDATE sub-agent tools, model, and description requirements"
      - "ASSESS sub-agent system prompt structure and content quality"
      - "EVALUATE sub-agent integration with existing sub-agent ecosystem"

    meta_recursive_structure_review_requirements:
      - "MANDATORY: Use code-quality-analyzer for structure review"
      - "MANDATORY: Analyze comprehensive sub-agent YAML configuration"
      - "MANDATORY: Validate sub-agent tools and model requirements"
      - "MANDATORY: Assess sub-agent system prompt structure"
      - "FORBIDDEN: Reviewing sub-agent structure without using existing sub-agent expertise"

    meta_recursive_structure_review_standards:
      subagent_structure_review:
        - "COMPREHENSIVE sub-agent structure review using existing expertise"
        - "DETAILED sub-agent YAML frontmatter configuration analysis"
        - "SPECIFIC sub-agent tools and model validation"
        - "CLEAR sub-agent system prompt structure assessment"
        - "EFFECTIVE sub-agent integration evaluation"

      existing_subagent_structure_collaboration:
        - "COLLABORATIVE existing sub-agent structure review workflow"
        - "SPECIALIZED existing sub-agent structure expertise utilization"
        - "INTEGRATED existing sub-agent structure quality assurance"
        - "COMPREHENSIVE existing sub-agent structure validation"
        - "STANDARDIZED existing sub-agent structure assessment"

  phase_4:
    name: "Meta-Recursive Sub-Agent Quality Review"
    mandatory_actions:
      - "USE code-quality-enforcer to enforce sub-agent quality standards"
      - "USE code-quality-analyzer to analyze sub-agent quality metrics"
      - "VALIDATE sub-agent prompt engineering best practices compliance"
      - "ASSESS sub-agent tool access and permissions appropriateness"
      - "EVALUATE sub-agent model selection and configuration"

    meta_recursive_quality_review_requirements:
      - "MANDATORY: Use code-quality-enforcer for quality enforcement"
      - "MANDATORY: Use code-quality-analyzer for quality analysis"
      - "MANDATORY: Validate sub-agent prompt engineering best practices"
      - "MANDATORY: Assess sub-agent tool access and permissions"
      - "FORBIDDEN: Reviewing sub-agents without quality assurance validation"

    meta_recursive_quality_review_standards:
      subagent_quality_review:
        - "COMPREHENSIVE sub-agent quality review using existing expertise"
        - "DETAILED sub-agent quality enforcement using existing tools"
        - "SPECIFIC sub-agent prompt engineering validation"
        - "CLEAR sub-agent tool access assessment"
        - "EFFECTIVE sub-agent model selection evaluation"

      existing_subagent_quality_integration:
        - "INTEGRATED existing sub-agent quality review"
        - "COLLABORATIVE existing sub-agent quality enforcement"
        - "SPECIALIZED existing sub-agent prompt engineering validation"
        - "COMPREHENSIVE existing sub-agent tool access assessment"
        - "STANDARDIZED existing sub-agent model selection evaluation"

  phase_5:
    name: "Meta-Recursive Sub-Agent Architectural Review"
    mandatory_actions:
      - "USE architecture-compliance-reviewer to review sub-agent architecture"
      - "USE enterprise-microservices-architect for complex sub-agent architecture review"
      - "VALIDATE sub-agent compliance with Anthropic best practices"
      - "ASSESS sub-agent integration with existing sub-agent ecosystem"
      - "EVALUATE sub-agent scalability and maintainability"

    meta_recursive_architectural_review_requirements:
      - "MANDATORY: Use architecture-compliance-reviewer for architectural review"
      - "MANDATORY: Use enterprise-microservices-architect for complex architecture review"
      - "MANDATORY: Validate sub-agent compliance with Anthropic best practices"
      - "MANDATORY: Assess sub-agent integration with existing ecosystem"
      - "FORBIDDEN: Reviewing sub-agents without architectural compliance validation"

    meta_recursive_architectural_review_standards:
      subagent_architectural_review:
        - "COMPREHENSIVE sub-agent architectural review using existing expertise"
        - "DETAILED sub-agent compliance validation with Anthropic best practices"
        - "SPECIFIC sub-agent integration assessment with existing ecosystem"
        - "CLEAR sub-agent scalability and maintainability evaluation"
        - "EFFECTIVE sub-agent architectural compliance verification"

      existing_subagent_architectural_integration:
        - "INTEGRATED existing sub-agent architectural review"
        - "COLLABORATIVE existing sub-agent compliance verification"
        - "SPECIALIZED existing sub-agent integration assessment"
        - "COMPREHENSIVE existing sub-agent scalability evaluation"
        - "STANDARDIZED existing sub-agent maintainability assessment"

  phase_6:
    name: "Meta-Recursive Sub-Agent Documentation Review"
    mandatory_actions:
      - "USE documentation-protocol-enforcer to review sub-agent documentation"
      - "ANALYZE sub-agent documentation completeness and accuracy"
      - "VALIDATE sub-agent documentation maintainability"
      - "ASSESS sub-agent documentation user experience"
      - "EVALUATE sub-agent documentation standards compliance"

    meta_recursive_documentation_review_requirements:
      - "MANDATORY: Use documentation-protocol-enforcer for documentation review"
      - "MANDATORY: Analyze sub-agent documentation completeness"
      - "MANDATORY: Validate sub-agent documentation maintainability"
      - "MANDATORY: Assess sub-agent documentation user experience"
      - "FORBIDDEN: Reviewing sub-agents without documentation standards validation"

    meta_recursive_documentation_review_standards:
      subagent_documentation_review:
        - "COMPREHENSIVE sub-agent documentation review using existing expertise"
        - "DETAILED sub-agent documentation completeness analysis"
        - "SPECIFIC sub-agent documentation maintainability assessment"
        - "CLEAR sub-agent documentation user experience evaluation"
        - "EFFECTIVE sub-agent documentation standard enforcement"

      existing_subagent_documentation_integration:
        - "INTEGRATED existing sub-agent documentation review"
        - "COLLABORATIVE existing sub-agent documentation analysis"
        - "SPECIALIZED existing sub-agent documentation assessment"
        - "COMPREHENSIVE existing sub-agent documentation evaluation"
        - "STANDARDIZED existing sub-agent documentation enforcement"

  phase_7:
    name: "Meta-Recursive Sub-Agent Testing Review"
    mandatory_actions:
      - "USE test-executor-analyzer to review sub-agent testing functionality"
      - "USE test-preparation-planner to review sub-agent testing strategy"
      - "VALIDATE sub-agent testing coverage and effectiveness"
      - "ASSESS sub-agent testing integration requirements"
      - "EVALUATE sub-agent testing performance and reliability"

    meta_recursive_testing_review_requirements:
      - "MANDATORY: Use test-executor-analyzer for testing review"
      - "MANDATORY: Use test-preparation-planner for testing strategy review"
      - "MANDATORY: Validate sub-agent testing coverage and effectiveness"
      - "MANDATORY: Assess sub-agent testing integration requirements"
      - "FORBIDDEN: Reviewing sub-agents without comprehensive testing validation"

    meta_recursive_testing_review_standards:
      subagent_testing_review:
        - "COMPREHENSIVE sub-agent testing review using existing expertise"
        - "DETAILED sub-agent testing coverage and effectiveness validation"
        - "SPECIFIC sub-agent testing integration assessment"
        - "CLEAR sub-agent testing performance evaluation"
        - "EFFECTIVE sub-agent testing strategy review"

      existing_subagent_testing_integration:
        - "INTEGRATED existing sub-agent testing review"
        - "COLLABORATIVE existing sub-agent testing validation"
        - "SPECIALIZED existing sub-agent testing assessment"
        - "COMPREHENSIVE existing sub-agent testing evaluation"
        - "STANDARDIZED existing sub-agent testing strategy"

  phase_8:
    name: "Meta-Recursive Sub-Agent Deployment Review"
    mandatory_actions:
      - "USE deployment-operations-manager to review sub-agent deployment"
      - "USE deployment-orchestrator to review sub-agent workflow orchestration"
      - "VALIDATE sub-agent deployment configuration and readiness"
      - "ASSESS sub-agent deployment integration with existing ecosystem"
      - "EVALUATE sub-agent deployment success and functionality"

    meta_recursive_deployment_review_requirements:
      - "MANDATORY: Use deployment-operations-manager for deployment review"
      - "MANDATORY: Use deployment-orchestrator for workflow orchestration review"
      - "MANDATORY: Validate sub-agent deployment configuration"
      - "MANDATORY: Assess sub-agent deployment integration"
      - "FORBIDDEN: Reviewing sub-agents without proper deployment validation"

    meta_recursive_deployment_review_standards:
      subagent_deployment_review:
        - "COMPREHENSIVE sub-agent deployment review using existing expertise"
        - "DETAILED sub-agent deployment configuration validation"
        - "SPECIFIC sub-agent deployment integration assessment"
        - "CLEAR sub-agent deployment success verification"
        - "EFFECTIVE sub-agent workflow orchestration review"

      existing_subagent_deployment_integration:
        - "INTEGRATED existing sub-agent deployment review"
        - "COLLABORATIVE existing sub-agent deployment validation"
        - "SPECIALIZED existing sub-agent deployment assessment"
        - "COMPREHENSIVE existing sub-agent deployment evaluation"
        - "STANDARDIZED existing sub-agent deployment verification"

  phase_9:
    name: "Meta-Recursive Sub-Agent Review Completion and Reporting"
    mandatory_actions:
      - "GENERATE comprehensive meta-recursive sub-agent review report"
      - "RECORD meta-recursive review findings and recommendations"
      - "VALIDATE sub-agent review completeness and accuracy"
      - "PROVIDE next steps and sub-agent improvement guidance"
      - "CONFIRM meta-recursive sub-agent review completion and success"

    meta_recursive_review_completion_requirements:
      - "MANDATORY: Generate detailed meta-recursive review report"
      - "MANDATORY: Record meta-recursive review findings with timestamps"
      - "MANDATORY: Validate sub-agent review completeness and accuracy"
      - "MANDATORY: Provide clear next steps for sub-agent improvements"

# Meta-Recursive Sub-Agent Review Standards and Criteria
meta_recursive_subagent_review_standards:
  anthropic_subagent_review_best_practices:
    subagent_review_structure: "CLEAR review criteria, specific validation requirements, structured analysis"
    subagent_review_clarity: "UNAMBIGUOUS review findings, clear recommendations, specific improvements"
    subagent_review_safety: "APPROPRIATE review guardrails, ethical considerations, responsible AI review"
    subagent_review_effectiveness: "MEASURABLE review outcomes, clear validation, specific improvement criteria"

  existing_subagent_ecosystem_review_utilization:
    subagent_review_collaboration: "EFFECTIVE existing sub-agent review collaboration workflows"
    subagent_review_expertise: "SPECIALIZED existing sub-agent review expertise utilization"
    subagent_review_quality: "INTEGRATED existing sub-agent review quality assurance"
    subagent_review_architecture: "COMPREHENSIVE existing sub-agent review architectural validation"

  meta_recursive_review_standards:
    subagent_review_creation: "COMPLETE meta-recursive sub-agent review using existing ecosystem"
    subagent_review_validation: "THOROUGH sub-agent review validation using existing sub-agent expertise"
    subagent_review_integration: "SEAMLESS sub-agent review integration with existing ecosystem"
    subagent_review_quality: "ENTERPRISE sub-agent review quality standards using existing sub-agent tools"

# Final Deliverables with Mandatory Reverse Date Stamps
final_deliverables:
  naming_convention: "MANDATORY: ALL meta-recursive sub-agent review output files MUST use reverse date stamp format: YYYY-MM-DD-HHMMSS"
  date_stamp_format: "{{YYYY}}-{{MM}}-{{DD}}-{{HHMMSS}}"
  example_format: "2025-09-25-150000"

  required_outputs:
    - "./project/docs/sub-agents/Review_Report-{{YYYY-MM-DD-HHMMSS}}.ipynb (comprehensive code review)"
    - "./project/docs/sub-agents/Recommendations-{{YYYY-MM-DD-HHMMSS}}.md (improvements and best practices)"
    - "./project/docs/sub-agents/Action_Items-{{YYYY-MM-DD-HHMMSS}}.md (prioritized fixes and validation)"

  date_stamp_requirements:
    - "MANDATORY: Use current UTC timestamp for all meta-recursive sub-agent review output files"
    - "MANDATORY: Format as YYYY-MM-DD-HHMMSS (reverse chronological order)"
    - "MANDATORY: Include date stamp in ALL meta-recursive sub-agent review deliverable filenames"
    - "MANDATORY: Use consistent date stamp across all meta-recursive sub-agent review outputs"
    - "FORBIDDEN: Creating sub-agent review files without proper date stamps"
    - "FORBIDDEN: Using different date formats within same meta-recursive sub-agent review session"

# Meta-Recursive Sub-Agent Review Execution Workflow with Mandatory Date Stamp Tracking
execution_steps:
  - "1. VALIDATE meta-recursive sub-agent review parameters and requirements"
  - "2. CHECK target directory accessibility and permissions"
  - "3. CREATE meta-recursive sub-agent review timestamp: $(date -u +%Y-%m-%d-%H%M%S)"
  - "4. ANALYZE existing sub-agent ecosystem for review expertise"
  - "5. USE code-quality-analyzer to review sub-agent structure and organization"
  - "6. USE code-quality-enforcer to enforce sub-agent quality standards"
  - "7. USE architecture-compliance-reviewer to review sub-agent architecture"
  - "8. USE documentation-protocol-enforcer to review sub-agent documentation"
  - "9. USE test-executor-analyzer to review sub-agent testing functionality"
  - "10. USE deployment-operations-manager to review sub-agent deployment"
  - "11. GENERATE comprehensive meta-recursive sub-agent review report with timestamps"
  - "12. VALIDATE sub-agent review completeness and accuracy"
  - "13. CLEANUP temporary meta-recursive sub-agent review files and artifacts"
  - "14. RECORD meta-recursive sub-agent review completion with timestamp"
  - "15. PROVIDE next steps and sub-agent improvement guidance"

date_stamp_execution_requirements:
  - "MANDATORY: Record precise timestamps for each meta-recursive sub-agent review step"
  - "MANDATORY: Use UTC time for all meta-recursive sub-agent review timestamp recordings"
  - "MANDATORY: Include timestamps in all meta-recursive sub-agent review tracking"
  - "MANDATORY: Timestamp all meta-recursive sub-agent review deliverable creation"
  - "FORBIDDEN: Proceeding without proper meta-recursive sub-agent review timestamp documentation"

# Meta-Recursive Sub-Agent Review Quality Gates
meta_recursive_subagent_review_quality_gates:
  pre_meta_recursive_review:
    - "All required meta-recursive sub-agent review parameters provided and validated"
    - "Target directory accessible and writable"
    - "Sub-agent to review accessible and valid"
    - "Existing sub-agent ecosystem accessible and functional"

  meta_recursive_review_phase:
    - "All meta-recursive sub-agent review phases completed successfully"
    - "No critical errors during meta-recursive sub-agent review process"
    - "All existing sub-agent ecosystem review standards validated appropriately"
    - "All meta-recursive sub-agent review assessments completed thoroughly"

  post_meta_recursive_review:
    - "Comprehensive meta-recursive sub-agent review report generated"
    - "All meta-recursive sub-agent review findings documented with timestamps"
    - "Sub-agent review completeness and accuracy validated"
    - "Sub-agent improvement recommendations provided"

# Constraints and Requirements
meta_recursive_subagent_review_constraints:
  mandatory_requirements:
    - "ALL meta-recursive sub-agent review MUST be comprehensive and thorough"
    - "ALL existing sub-agent ecosystem review standards MUST be validated appropriately"
    - "ALL meta-recursive sub-agent review findings MUST be documented with timestamps"
    - "ALL meta-recursive sub-agent review recommendations MUST be actionable and specific"
    - "ALL meta-recursive sub-agent review reports MUST be complete and accurate"
    - "ALWAYS use systematic meta-recursive sub-agent review practices"
    - "NEVER review sub-agents that violate existing sub-agent ecosystem standards"

  strictly_forbidden:
    - "Reviewing sub-agents without using existing sub-agent ecosystem"
    - "Skipping meta-recursive sub-agent review workflows"
    - "Partial or incomplete meta-recursive sub-agent review"
    - "Reviewing sub-agents with critical existing sub-agent ecosystem violations"
    - "Creating temporary or workaround review processes"
    - "Missing meta-recursive sub-agent review documentation"
    - "Proceeding with failed meta-recursive sub-agent review quality gates"
